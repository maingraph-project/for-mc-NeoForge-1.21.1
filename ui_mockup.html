<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGMC 映射管理器 UI 演示</title>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --panel-bg: #2d2d2d;
            --border-color: #3f3f3f;
            --text-color: #e0e0e0;
            --accent-color: #4caf50;
            --hover-color: #388e3c;
            --danger-color: #f44336;
            --list-item-hover: #3d3d3d;
            --list-item-selected: #4a4a4a;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        header {
            padding: 15px 20px;
            background-color: #252525;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* 列表面板通用样式 */
        .panel {
            display: flex;
            flex-direction: column;
            border-right: 1px solid var(--border-color);
            background-color: var(--panel-bg);
        }

        .panel-header {
            padding: 10px 15px;
            background-color: #333;
            font-weight: bold;
            font-size: 0.9em;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .list-container {
            flex: 1;
            overflow-y: auto;
        }

        .list-item {
            padding: 12px 15px;
            border-bottom: 1px solid #363636;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }

        .list-item:hover {
            background-color: var(--list-item-hover);
        }

        .list-item.selected {
            background-color: var(--list-item-selected);
            border-left: 3px solid var(--accent-color);
        }

        /* 左侧：MC ID 列表 */
        .left-panel {
            width: 350px;
        }

        .id-text {
            font-family: 'Consolas', monospace;
            color: #81c784;
        }

        .add-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            font-size: 24px;
            cursor: pointer;
            padding: 0 10px;
            line-height: 1;
        }

        .add-btn:hover {
            color: var(--hover-color);
        }

        /* 右侧：蓝图列表 */
        .right-panel {
            flex: 1;
            background-color: #252525;
        }

        .blueprint-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .blueprint-info {
            display: flex;
            flex-direction: column;
        }

        .blueprint-name {
            font-weight: bold;
        }

        .blueprint-desc {
            font-size: 0.8em;
            color: #888;
        }

        /* 底部工具栏 */
        footer {
            height: 60px;
            background-color: #252525;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }

        .btn {
            padding: 8px 25px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--hover-color);
            transform: translateY(-1px);
        }

        /* 弹窗模拟 */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background: var(--panel-bg);
            padding: 25px;
            border-radius: 8px;
            width: 400px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .modal h3 { margin-top: 0; }
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            background: #1e1e1e;
            border: 1px solid var(--border-color);
            color: white;
            border-radius: 4px;
            box-sizing: border-box;
            font-family: 'Consolas', monospace;
        }

        .badge {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            background: #444;
            margin-left: 8px;
            color: #ccc;
        }
    </style>
</head>
<body>

<header>
    <div style="font-weight: bold; font-size: 1.2em;">MGMC 映射管理器 <span style="font-size: 0.6em; color: #888; font-weight: normal;">v1.21.11</span></div>
    <div style="font-size: 0.9em; color: #888;">按 <kbd style="background: #444; padding: 2px 5px; border-radius: 3px;">ESC</kbd> 退出</div>
</header>

<div class="main-container">
    <!-- 左侧 ID 列表 -->
    <div class="panel left-panel">
        <div class="panel-header">
            <span>订阅的 Minecraft ID</span>
            <button class="add-btn" onclick="showAddIdModal()" title="新建定义">+</button>
        </div>
        <div class="list-container" id="id-list">
            <!-- 模拟数据 -->
            <div class="list-item selected" onclick="selectId(this, 'minecraft:diamond_ore')">
                <span class="id-text">minecraft:diamond_ore</span>
                <span class="badge">2 个蓝图</span>
            </div>
            <div class="list-item" onclick="selectId(this, 'minecraft:player')">
                <span class="id-text">minecraft:player</span>
                <span class="badge">1 个蓝图</span>
            </div>
            <div class="list-item" onclick="selectId(this, 'minecraft:stone')">
                <span class="id-text">minecraft:stone</span>
                <span class="badge">0 个蓝图</span>
            </div>
        </div>
    </div>

    <!-- 右侧 蓝图列表 -->
    <div class="panel right-panel">
        <div class="panel-header">
            <span id="right-panel-title">已绑定到 minecraft:diamond_ore 的蓝图</span>
            <button class="btn btn-primary" style="padding: 2px 10px; font-size: 12px;">+ 绑定新蓝图</button>
        </div>
        <div class="list-container" id="blueprint-list">
            <!-- 动态渲染 -->
            <div class="list-item blueprint-item">
                <div class="blueprint-info">
                    <span class="blueprint-name">矿物掉落倍率优化</span>
                    <span class="blueprint-desc">路径: blueprints/mining/drop_multiplier.json</span>
                </div>
                <button style="background: none; border: none; color: var(--danger-color); cursor: pointer;">移除</button>
            </div>
            <div class="list-item blueprint-item">
                <div class="blueprint-info">
                    <span class="blueprint-name">挖掘震动粒子特效</span>
                    <span class="blueprint-desc">路径: blueprints/vfx/mining_particle.json</span>
                </div>
                <button style="background: none; border: none; color: var(--danger-color); cursor: pointer;">移除</button>
            </div>
        </div>
    </div>
</div>

<footer>
    <button class="btn btn-primary" onclick="saveAll()">保存更改</button>
</footer>

<!-- 新建 ID 弹窗 -->
<div id="add-id-modal" class="modal-overlay">
    <div class="modal">
        <h3>新建定义</h3>
        <p style="font-size: 0.9em; color: #888;">请输入要监听的 Minecraft 注册表 ID (ResourceLocation)</p>
        <input type="text" id="new-id-input" placeholder="例如 minecraft:zombie">
        <div class="modal-footer">
            <button class="btn" style="background: #444;" onclick="closeModal('add-id-modal')">取消</button>
            <button class="btn btn-primary" onclick="confirmAddId()">确定</button>
        </div>
    </div>
</div>

<!-- ESC 询问弹窗 -->
<div id="esc-modal" class="modal-overlay">
    <div class="modal">
        <h3>未保存的更改</h3>
        <p>您有未保存的映射配置，是否保存后退出？</p>
        <div class="modal-footer">
            <button class="btn" style="background: var(--danger-color);" onclick="exitWithoutSaving()">放弃更改</button>
            <button class="btn" style="background: #444;" onclick="closeModal('esc-modal')">取消</button>
            <button class="btn btn-primary" onclick="saveAndExit()">保存并退出</button>
        </div>
    </div>
</div>

<script>
    const mockData = {
        'minecraft:diamond_ore': [
            { name: '矿物掉落倍率优化', path: 'blueprints/mining/drop_multiplier.json' },
            { name: '挖掘震动粒子特效', path: 'blueprints/vfx/mining_particle.json' }
        ],
        'minecraft:player': [
            { name: '全局防作弊检测', path: 'blueprints/system/anti_cheat.json' }
        ],
        'minecraft:stone': []
    };

    function selectId(element, id) {
        // 更新选中状态
        document.querySelectorAll('.list-item').forEach(el => el.classList.remove('selected'));
        element.classList.add('selected');

        // 更新标题
        document.getElementById('right-panel-title').innerText = `已绑定到 ${id} 的蓝图`;

        // 更新蓝图列表
        const list = document.getElementById('blueprint-list');
        list.innerHTML = '';
        
        const blueprints = mockData[id] || [];
        if (blueprints.length === 0) {
            list.innerHTML = '<div style="padding: 40px; text-align: center; color: #666;">暂无绑定蓝图</div>';
        } else {
            blueprints.forEach(bp => {
                list.innerHTML += `
                    <div class="list-item blueprint-item">
                        <div class="blueprint-info">
                            <span class="blueprint-name">${bp.name}</span>
                            <span class="blueprint-desc">路径: ${bp.path}</span>
                        </div>
                        <button style="background: none; border: none; color: var(--danger-color); cursor: pointer;">移除</button>
                    </div>
                `;
            });
        }
    }

    function showAddIdModal() {
        document.getElementById('add-id-modal').style.display = 'flex';
        document.getElementById('new-id-input').focus();
    }

    function closeModal(id) {
        document.getElementById(id).style.display = 'none';
    }

    function confirmAddId() {
        const id = document.getElementById('new-id-input').value.trim();
        if (id) {
            const list = document.getElementById('id-list');
            const newItem = document.createElement('div');
            newItem.className = 'list-item';
            newItem.onclick = function() { selectId(this, id); };
            newItem.innerHTML = `
                <span class="id-text">${id}</span>
                <span class="badge">0 个蓝图</span>
            `;
            list.appendChild(newItem);
            mockData[id] = [];
            closeModal('add-id-modal');
            selectId(newItem, id);
        }
    }

    function saveAll() {
        alert('配置已成功保存到 bindings.json！');
    }

    // 模拟 ESC 键监听
    window.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            document.getElementById('esc-modal').style.display = 'flex';
        }
    });

    function saveAndExit() {
        alert('正在保存并退出...');
        closeModal('esc-modal');
    }

    function exitWithoutSaving() {
        alert('放弃更改并退出...');
        closeModal('esc-modal');
    }
</script>

</body>
</html>
